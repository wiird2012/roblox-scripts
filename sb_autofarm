--[[
Remember to put this in autoexec!! recommended to use loadstring version for less chance of serverhop failing
Remember to put this in autoexec!! recommended to use loadstring version for less chance of serverhop failing
Remember to put this in autoexec!! recommended to use loadstring version for less chance of serverhop failing
Remember to put this in autoexec!! recommended to use loadstring version for less chance of serverhop failing
]]


if game.PlaceId == 6403373529 or game.PlaceId == 11520107397 or game.PlaceId == 9015014224 then --Check for valid places

game.Loaded:Wait() --Waits until the game is fully loaded to execute (remove if you want faster farming, removing this will make the autofarm more unstable)

wait(3) --Failsafe (remove for faster farming, will make more unstable)

--Auto enter Arena

print("[SB AutoFarm] Entering Arena...")

if not game.Players.LocalPlayer.Character:FindFirstChild("entered") and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then                            
	repeat task.wait(.005)                                
		firetouchinterest(game.Players.LocalPlayer.Character:WaitForChild("Head"), workspace.Lobby.Teleport1.TouchInterest.Parent, 0)
		firetouchinterest(game.Players.LocalPlayer.Character:WaitForChild("Head"), workspace.Lobby.Teleport1.TouchInterest.Parent, 1)
	until game.Players.LocalPlayer.Character:FindFirstChild("entered")
end

--Auto grab Slapples

print("[SB AutoFarm] Grabbing Slapples...")

for Index, Instance in next, workspace.Arena.island5.Slapples:GetDescendants() do
	if Instance.ClassName == "TouchTransmitter" then
		firetouchinterest(game.Players.LocalPlayer.Character.Head, Instance.Parent, 0)
		firetouchinterest(game.Players.LocalPlayer.Character.Head, Instance.Parent, 1)
	end
end

--Server Hop

warn("[SB AutoFarm] Attempting Server Hop...")

local Http = game:GetService("HttpService")
local TPS = game:GetService("TeleportService")
local Api = "https://games.roblox.com/v1/games/"

local _place = game.PlaceId
local _servers = Api.._place.."/servers/Public?sortOrder=Asc&limit=100"
function ListServers(cursor)
   local Raw = game:HttpGet(_servers .. ((cursor and "&cursor="..cursor) or ""))
   return Http:JSONDecode(Raw)
end

local Server, Next; repeat
   local Servers = ListServers(Next)
   Server = Servers.data[1]
   Next = Servers.nextPageCursor
until Server

TPS:TeleportToPlaceInstance(_place,Server.id,game.Players.LocalPlayer)

--Serverhop again in case the other one didn't work (Fallback)

wait(20)

while true do

warn("[SB AutoFarm] Attempting Server Hop (again)...")

wait(20) --secs before retrying serverhop, edit to ur liking
	local _place = game.PlaceId
	local _servers = Api.._place.."/servers/Public?sortOrder=Asc&limit=100"
	function ListServers(cursor)
	   local Raw = game:HttpGet(_servers .. ((cursor and "&cursor="..cursor) or ""))
	   return Http:JSONDecode(Raw)
	end

	local Server, Next; repeat
	   local Servers = ListServers(Next)
	   Server = Servers.data[1]
	   Next = Servers.nextPageCursor
	until Server

	TPS:TeleportToPlaceInstance(_place,Server.id,game.Players.LocalPlayer)
end

else

warn("[SB AutoFarm] Invalid/Unsupported Game!\nSupported Games: SB Regular, Killstreak Only, No OneShots")

end
